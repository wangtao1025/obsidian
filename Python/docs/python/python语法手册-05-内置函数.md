# Python 语法手册：内置函数

← [语法手册总览](/python/python语法手册) | 下一章见总览

---

**本章对应自测卷**：[五、内置函数（共 5 题）](/python/Python核心语法自测试卷#五内置函数-共-5-题)  
**学完能做什么**：用 `len/sum/max/min` 做统计与极差，用 `key` 按字典某字段比大小，分清 `reversed()`/`sorted()` 不改原数据。  
**小白注意**：① `max`/`min` 按“规则”比要用 `key=lambda x: x["字段"]`。② `sorted()` 返回新列表，`.sort()` 只用于列表且返回 `None`。③ 空序列 `max([])` 会报错。

---

## 五、内置函数

本章介绍写代码时最常用的几个**内置函数**（不用 `import`，直接就能用）。每个函数都会说明：做什么、怎么用、注意点，并配上简单示例，方便小白对照练习。

---

### 5.1 `len()`：求长度（元素个数）

**一句话**：返回序列或集合里**有多少个元素**。

**写法**：`len(对象)`

**能传什么**：字符串、列表、元组、字典、集合、range 等「有长度」的对象。

**返回值**：一个**整数**。

```python
len("hello")           # 5  （5 个字符）
len([10, 20, 30])      # 3  （3 个元素）
len((1, 2))            # 2  （元组 2 个元素）
len({"a": 1, "b": 2})  # 2  （字典是键的个数）
len(range(5))          # 5
len([])                # 0  （空列表长度为 0）
```

**常见用法**：算平均分时要除以「个数」，就用 `len(scores)` 当分母：`sum(scores) / len(scores)`。（自测卷 5.1）

**注意**：  
- 传**数字**会报错（`len(42)` 不行），因为整数没有「长度」概念。  
- 字典的 `len` 是**键的个数**，不是键值对占用的内存。

---

### 5.2 `sum()`：对数值求和

**一句话**：把可迭代对象里的**数字全部加起来**。

**写法**：`sum(iterable, start=0)`

| 参数 | 含义 |
|------|------|
| 第一个参数 | 必须是「可迭代对象」，且元素一般是数字（如列表、元组、range） |
| `start`（可选） | 从哪个数开始加，默认是 `0`。例如 `sum([1,2,3], 10)` 得到 10+1+2+3=16 |

**返回值**：一个**数字**（整数或浮点数）。

```python
sum([1, 2, 3, 4, 5])   # 15
sum((10, 20, 30))      # 60
sum(range(6))          # 0+1+2+3+4+5 = 15
sum([], 100)           # 空列表 + start → 100
sum([1.5, 2.5])        # 4.0
```

**常见用法**：算总分、算平均分的分子：`sum(scores) / len(scores)`。（自测卷 5.1）

**注意**：  
- 不能对**字符串列表**直接 `sum()`（字符串不能和 0 相加），需要先转成数字或换写法。  
- 空列表 `sum([])` 得到 `0`（因为 start 默认是 0）。

---

### 5.3 `max()` 和 `min()`：最大值与最小值（自测卷 5.2 待复习）

**一句话**：`max()` 返回其中**最大的**一个，`min()` 返回**最小的**一个。

**写法**：  
- `max(iterable)` 或 `max(a, b, c, ...)`  
- `min(iterable)` 或 `min(a, b, c, ...)`

**两种用法**：  
1. **传一个可迭代对象**：在「一整组」里找最大/最小。  
2. **传多个参数**：在这几个数里比。  
3. **传可迭代对象 + `key`**：按「key 函数的返回值」来比大小（见下表）。

| 参数 | 含义 |
|------|------|
| 可迭代对象 或 多个参数 | 要比较的对象（数字、字符串、或元素可比较的列表等） |
| `key`（可选） | 一个函数；对每个元素先算 `key(元素)`，再按这个结果比大小。（自测卷 5.2） |

**返回值**：可迭代对象里的**一个元素**（不是索引），类型和元素一致。

```python
# 基本用法
max([85, 92, 78, 95, 60])   # 95
min([85, 92, 78, 95, 60])   # 60
max(1, 5, 3)                # 5  多个参数
min("hello")                # 'e'  按字母/Unicode 比

# key：按「规则」比。例如按字典里的 "score" 找最高分的人
students = [
    {"name": "小明", "score": 80},
    {"name": "小红", "score": 95},
    {"name": "小刚", "score": 72}
]
max(students, key=lambda x: x["score"])   # {"name": "小红", "score": 95}
min(students, key=lambda x: x["score"])   # {"name": "小刚", "score": 72}
```

**常见用法**：  
- 算**极差**（判断分数是否波动大）：`max(scores) - min(scores)`。（自测卷 5.5）  
- 在一组字典里按某个键找「最大/最小」的那条：用 `key=lambda x: x["字段名"]`。

**注意**：  
- 空序列会报错：`max([])`、`min([])` 都会抛出 `ValueError`。  
- 元素类型要能互相比较（不能列表和数字混在一起比）。

---

### 5.4 `reversed()`：反向迭代（不改原数据）

**一句话**：把序列**从后往前**遍历，返回一个「反向迭代器」，**不修改**原来的列表/元组/字符串。

**写法**：`reversed(sequence)`

**能传什么**：列表、元组、字符串、range 等**有顺序**的序列（不能是集合、字典，因为无顺序）。

**返回值**：一个**迭代器**（不是列表）。若要得到列表，需要再包一层：`list(reversed(原序列))`。

```python
lst = [1, 2, 3, 4]
list(reversed(lst))   # [4, 3, 2, 1]
lst                   # [1, 2, 3, 4]  原列表没变

list(reversed("hello"))   # ['o', 'l', 'l', 'e', 'h']  注意得到的是字符列表
"".join(reversed("hello")) # "olleh"  反转字符串的常见写法
```

**和 `sorted()` 的共同点**：都是**不修改原数据**，只产生新的结果；原序列保持原样。（自测卷 5.3）

**注意**：  
- `reversed()` 返回的是迭代器，用完就没了；想多次用要转成列表：`list(reversed(...))`。  
- 列表还有 `.reverse()` 方法：会**原地**反转并返回 `None`，不要和 `reversed()` 搞混。

---

### 5.5 `sorted()`：排序并返回新列表（不改原数据）

**一句话**：对可迭代对象**排序**，**返回一个新的列表**，**不修改**原数据；可以用 `key` 指定「按什么排」、用 `reverse=True` 降序。

**写法**：`sorted(iterable, key=None, reverse=False)`

| 参数 | 含义 |
|------|------|
| 第一个参数 | 要排序的可迭代对象（列表、元组、字符串等） |
| `key`（可选） | 一个函数；对每个元素先算 `key(元素)`，再按这个返回值排序。例如 `key=lambda x: x["score"]` 按分数排。 |
| `reverse`（可选） | 默认 `False` 为升序；设为 `True` 为降序。 |

**返回值**：**新的列表**（无论传入的是列表、元组还是字符串，返回的都是列表）。

```python
sorted([3, 1, 4, 1, 5])              # [1, 1, 3, 4, 5]  升序
sorted([3, 1, 4], reverse=True)      # [4, 3, 1]  降序
sorted("hello")                       # ['e', 'h', 'l', 'l', 'o']  按字符排

# 按字典的某个键排序（例如按分数）
students = [{"name": "小明", "score": 80}, {"name": "小红", "score": 95}]
sorted(students, key=lambda x: x["score"])               # 按分数升序
sorted(students, key=lambda x: x["score"], reverse=True) # 按分数降序
```

**和 `.sort()` 的区别**（自测卷 5.4）：

| 对比项 | `sorted(可迭代对象)` | 列表的 `.sort()` |
|--------|----------------------|-------------------|
| 是否改原数据 | **不改**，原数据保持原样 | **改**，只作用于列表，原地排序 |
| 返回值 | **返回新列表**，可赋值给变量 | 返回 **None**，不要写 `a = lst.sort()` |
| 能排序谁 | 列表、元组、字符串等都可 | **只有列表**；元组、字符串没有 `.sort()` |

更详细的对比和易错点见：[第二章 2.1.1 sorted() 与 .sort() 详解](/python/python语法手册-02-内置数据结构#211-sorted-与-sort-详解小白必读)。

**注意**：  
- 想得到「排好序的新列表」用 `sorted()`；想「直接把当前列表排好、不关心返回值」用 `.sort()`。  
- 元组、字符串没有 `.sort()`，只能 `sorted(元组)` 或 `sorted(字符串)`，得到的是列表。

---

### 5.6 本章小结（对应自测卷 5.1～5.5）

| 函数 | 作用 | 自测卷 |
|------|------|--------|
| `len(iterable)` | 返回元素个数，常用于平均分的分母 | 5.1 |
| `sum(iterable)` | 对数值求和，常用于总分/平均分的分子 | 5.1 |
| `max` / `min` | 最大/最小值；可用 `key` 按规则比较 | 5.2、5.5 |
| `reversed(seq)` | 反向迭代，不改原数据，返回迭代器 | 5.3 |
| `sorted(iterable, key=..., reverse=...)` | 排序并返回新列表，不改原数据 | 5.3、5.4 |

- **平均分**：`sum(scores) / len(scores)`  
- **极差**：`max(scores) - min(scores)`  
- **按字典某键取最大/最小**：`max(列表, key=lambda x: x["键名"])`  
- **排序不改原数据**：用 `sorted()`；只排列表且可接受原地修改时用 `.sort()`。

---

**本章小结**：`len` 取个数，`sum` 求和，平均分 `sum/len`；`max`/`min` 可用 `key`；`reversed`/`sorted` 不改原数据，排序要新列表用 `sorted()`。
