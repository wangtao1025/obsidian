# Python 语法手册：逻辑判断 与 真值检测

← [语法手册总览](/python/python语法手册) | 下一章见总览

---

## 六、逻辑判断 与 真值检测

核心直觉： **Python 的逻辑运算不只是 `True/False`，更是“寻找结果”的过程。**

- `all(iterable)`：
  - 逻辑：只有全部为 `True` 才返回 `True`。
  - 例子：`all(s >= 60 for s in scores)` $\rightarrow$ 全员及格。
- `any(iterable)`：
  - 逻辑：只要有一个为 `True` 就返回 `True`。
  - 例子：`any(s < 60 for s in scores)` $\rightarrow$ 是否有人挂科。

### 6.1 逻辑运算符 and 、or、 not

|**运算符**|**语义**|**短路逻辑 (关键)**|**返回值规则**|
|---|---|---|---|
|**`and`**|且 (找假)|若第一个为假，直接返回，不再看后面。|**“与”返首假**：返回第一个遇到的假值；若全是真，返回最后一个。|
|**`or`**|或 (找真)|若第一个为真，直接返回，不再看后面。|**“或”返首真**：返回第一个遇到的真值；若全是假，返回最后一个。|
|**`not`**|非|总是评估操作数，并强制取反。|**必返布尔值**：强制转换为 `True` 或 `False`。|

### 6.2 真值测试：谁是“假”？ (Truth Value Testing)

在 Python 中，以下对象在逻辑判断时被视为 **`False`**，其余皆为 `True`：

1. **常量**：`None`, `False`
    
2. **数值零**：`0`, `0.0`, `0j`
    
3. **空容器**：`''`, `[]`, `()`, `{}`, `set()`, `range(0)`
    
4. **自定义对象**：定义了 `__bool__()` 返回 `False` 或 `__len__()` 返回 `0` 的类。
    

### 6.3 短路计算 (Short-circuiting) 的妙用

短路特性不仅为了性能，更是为了**程序安全**。

- **安全检查**：避免报错。
    ``` Python
    # 如果 user 为 None，后面 user.name 不会执行，避免了 AttributeError
    if user is not None and user.name == "Admin":
        pass
    ```
    
- **设置默认值**：
    ``` Python
    # 如果 input_name 是空字符串(假)，则取 "Guest"
    name = input_name or "Guest" 
    ```
    
### 6.4 进阶：自定义对象的真值

Python 判断对象真值的优先级：
1. **`__bool__()`**：最优先，返回布尔值。
2. **`__len__()`**：次优先，若返回 `0` 则为假。
3. **默认**：若两者都未定义，对象永远为 `True`。
    

---
