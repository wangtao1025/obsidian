/**
 * Next.js 风格纯黑主题
 * 仅覆盖深色模式，主背景与侧栏为纯黑
 */

.dark {
  /* 主背景：纯黑 */
  --vp-c-bg: #000000;
  --vp-c-bg-alt: #000000;
  --vp-c-bg-elv: #0a0a0a;
  --vp-c-bg-soft: #0a0a0a;

  /* 分隔线 / 边框：极弱，避免刺眼 */
  --vp-c-border: #262626;
  --vp-c-divider: #171717;
  --vp-c-gutter: #000000;

  /* 文字：略偏灰白，保持可读 */
  --vp-c-text-1: #ededed;
  --vp-c-text-2: #a1a1a1;
  --vp-c-text-3: #737373;

  /* 灰色色板（用于 hover、代码块等）*/
  --vp-c-gray-1: #a1a1a1;
  --vp-c-gray-2: #525252;
  --vp-c-gray-3: #262626;
  --vp-c-gray-soft: rgba(255, 255, 255, 0.08);

  /* 代码块：略亮于主背景，便于区分 */
  --vp-code-block-bg: #111111;
  --vp-code-block-divider-color: #1a1a1a;
  --vp-code-bg: rgba(255, 255, 255, 0.08);
  --vp-code-line-highlight-color: rgba(255, 255, 255, 0.06);
  --vp-code-copy-code-bg: #151515;
  --vp-code-copy-code-hover-bg: #1a1a1a;
  --vp-code-tab-bg: #111111;
}

/* 阅读进度条样式（已在 JS 中内联，这里仅作备用） */
#reading-progress {
  box-shadow: 0 0 4px var(--vp-c-brand-1);
}

/* 返回顶部按钮悬停效果增强 */
#back-to-top:hover {
  transform: translateY(-2px);
  box-shadow: var(--vp-shadow-3);
}

/* 图片点击放大时的过渡 */
.content img {
  cursor: zoom-in;
  transition: transform 0.2s;
}

.content img:hover {
  opacity: 0.9;
}

/* KaTeX 数学公式样式（适配纯黑主题）*/
.katex {
  color: var(--vp-c-text-1);
}

.katex .base {
  color: var(--vp-c-text-1);
}

/* Mermaid 图表容器 */
.mermaid {
  background: var(--vp-code-block-bg);
  padding: 1rem;
  border-radius: 6px;
  margin: 1rem 0;
}

/* 目录自动高亮 */
#VPSidebar .outline-link.active {
  color: var(--vp-c-brand-1) !important;
  font-weight: 600;
}

/* 代码块折叠 */
.collapsible-code {
  max-height: 400px;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.collapsible-code.expanded {
  max-height: none;
}

.code-collapse-btn {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 8px;
  font-size: 12px;
  background: var(--vp-c-bg-elv);
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  color: var(--vp-c-text-2);
  cursor: pointer;
  z-index: 10;
  transition: all 0.2s;
}

.code-collapse-btn:hover {
  background: var(--vp-c-default-soft);
  color: var(--vp-c-text-1);
}

/* 代码块语言标签 */
.code-lang-label {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 2px 8px;
  font-size: 11px;
  background: var(--vp-c-bg-elv);
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  color: var(--vp-c-text-3);
  text-transform: uppercase;
  font-weight: 500;
  z-index: 5;
}

/* 快捷键提示弹窗 */
.shortcuts-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s;
}

.shortcuts-content {
  background: var(--vp-c-bg-elv);
  border: 1px solid var(--vp-c-divider);
  border-radius: 8px;
  padding: 24px;
  max-width: 500px;
  width: 90%;
  box-shadow: var(--vp-shadow-4);
}

.shortcuts-content h3 {
  margin: 0 0 16px 0;
  color: var(--vp-c-text-1);
}

.shortcuts-content ul {
  list-style: none;
  padding: 0;
  margin: 0 0 16px 0;
}

.shortcuts-content li {
  padding: 8px 0;
  color: var(--vp-c-text-2);
  border-bottom: 1px solid var(--vp-c-divider);
}

.shortcuts-content li:last-child {
  border-bottom: none;
}

.shortcuts-content kbd {
  display: inline-block;
  padding: 2px 6px;
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-divider);
  border-radius: 4px;
  font-family: var(--vp-font-family-mono);
  font-size: 12px;
  color: var(--vp-c-text-1);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.close-btn {
  width: 100%;
  padding: 8px;
  background: var(--vp-c-brand-3);
  color: var(--vp-c-white);
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}

.close-btn:hover {
  background: var(--vp-c-brand-2);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* 打印样式优化 */
@media print {
  .sidebar,
  .navbar,
  #back-to-top,
  #reading-progress,
  .code-collapse-btn {
    display: none !important;
  }
  
  .content {
    max-width: 100% !important;
    padding: 0 !important;
  }
  
  pre {
    page-break-inside: avoid;
  }
  
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }
}

/* 全屏阅读模式：隐藏侧栏，内容占满可用空间 */
body.vp-fullscreen-reading .VPSidebar,
body.vp-fullscreen-reading .VPDoc aside,
body.vp-fullscreen-reading aside {
  display: none !important;
}

body.vp-fullscreen-reading .VPContent {
  margin-left: 0 !important;
  padding-left: 48px !important;
  padding-right: 48px !important;
}

body.vp-fullscreen-reading .VPContent .content,
body.vp-fullscreen-reading .vp-doc {
  max-width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

.vp-fullscreen-btn {
  padding: 6px 10px;
  margin-left: 8px;
  background: transparent;
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  color: var(--vp-c-text-2);
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.vp-fullscreen-btn:hover {
  background: var(--vp-c-default-soft);
  color: var(--vp-c-text-1);
}

/* 复制成功提示 */
.vp-copy-toast {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%) translateY(10px);
  padding: 8px 16px;
  background: var(--vp-c-bg-elv);
  border: 1px solid var(--vp-c-divider);
  border-radius: 8px;
  color: var(--vp-c-text-1);
  font-size: 14px;
  z-index: 10002;
  opacity: 0;
  transition: opacity 0.2s, transform 0.2s;
  box-shadow: var(--vp-shadow-3);
}

.vp-copy-toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* 预估阅读时间 */
.vp-reading-time {
  font-size: 13px;
  color: var(--vp-c-text-3);
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--vp-c-divider);
}

/* 移动端优化 */
@media (max-width: 768px) {
  #back-to-top {
    bottom: 1rem;
    right: 1rem;
    width: 40px;
    height: 40px;
    font-size: 18px;
  }
  
  .code-lang-label {
    font-size: 10px;
    padding: 1px 6px;
  }
  
  .code-collapse-btn {
    font-size: 11px;
    padding: 3px 6px;
  }
  
  .vp-fullscreen-btn {
    display: none;
  }
}
